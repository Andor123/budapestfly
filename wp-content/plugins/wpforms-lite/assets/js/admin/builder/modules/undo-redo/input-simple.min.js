export default function(e,o,t){class n extends WPForms.Admin.Builder.UndoRedoInputCommandBase.get(){static id="InputChangeCommand";applyValue(e){var o,n;i.preventRecordingCommand=!0,"radio"===this.inputType?this.applyRadioValue(e):(o=this.getElement()).is(".wpforms-field-map-select:not(.choicesjs-select)")&&o.closest(".wpforms-field-map-table, .wpforms-builder-provider-connection-fields-table").length?this.applyFieldMapSelectValue(e):(n=i.UndoRedoInputChoicesJS.getChoicesInstance(o))?i.UndoRedoInputChoicesJS.applyChoicesValue(o,e,n):(o.val(e).attr("value",e).trigger("input").trigger("change"),o.is(".minicolors-input")&&o.trigger("keyup.minicolors")),i.preventRecordingCommand=!1}applyRadioValue(e){var o=i.el.$builder.find(`input[name="${CSS.escape(this.inputName)}"]`);let n=o.filter(`[value="${e}"]`);!n.length&&this.$input?.is(".minicolors-input")&&(this.$input.val(e).attr("value",e),n=this.$input),o.prop("checked",!1),n.prop("checked",!0),(n.is("input")?n:o.first()).trigger("input").trigger("change"),n.is(".minicolors-input")&&n.trigger("keyup.minicolors")}applyFieldMapSelectValue(e){var o="custom_value"===this.$input.val(),n=this.getElement();n.val(e),o&&((e=n.closest("tr")).find("td.field").removeClass("field-is-custom-value"),e.find(".insert-smart-tag-dropdown").addClass("closed")),n.trigger("input").trigger("change")}getActionName(){var e,o;return this.actionName||(e=i.UndoRedoHelpers.getSectionTitle(this.$input),o=(o=(o=i.UndoRedoHelpers.getCLInputLabel(this.$input))?.length?o:i.UndoRedoChoicesList.getInputLabel(this.$input))?.length?o:i.UndoRedoHelpers.getInputLabel(this.$input),[wp.i18n.__("Change","wpforms"),e,i.actionNameSeparator,o].filter(Boolean).join(" "))}}let i={el:{},sel:{inputSimple:'input[type="text"], input[type="number"], input[type="password"], input[type="radio"]:not([name*="[choices]"].default), textarea:not(.wp-editor-area), select',layoutToggles:".wpforms-field-option-row-preset label, .wpforms-field-option-row-display label",FPCFColorScheme:"#wpforms-panel-field-settings-conversational_forms_color_scheme-wrap label, #wpforms-panel-field-settings-conversational_forms_color_scheme-wrap .minicolors-swatch, #wpforms-panel-field-settings-form_pages_color_scheme-wrap label, #wpforms-panel-field-settings-form_pages_color_scheme-wrap .minicolors-swatch",flatpickrHiddenInput:'[type="hidden"].flatpickr-input',providerConnection:".wpforms-builder-provider-connection"},undoManager:null,init(){i.setup(),i.el.$builder.on("wpformsBuilderReady",_.debounce(i.ready,250))},setup(){i.el.$document=t(e),i.el.$builder=t("#wpforms-builder")},ready(){try{i.UndoRedo=WPForms.Admin.Builder.UndoRedo,i.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers,i.UndoRedoChoicesList=WPForms.Admin.Builder.UndoRedoChoicesList,i.UndoRedoInputChoicesJS=WPForms.Admin.Builder.UndoRedoInputChoicesJS,i.UndoRedoInputProviderConnection=WPForms.Admin.Builder.UndoRedoInputProviderConnection,i.undoManager=i.UndoRedo.undoManager,i.actionNameSeparator=i.UndoRedo.config.actionNameSeparator,i.el={...i.el,...i.UndoRedo.el}}catch(e){return void wpf.debug("UndoRedoInputSimple: Dependency modules are not available.")}i.UndoRedo.registerCommand(n),i.events()},events(){i.el.$document.on("focus",i.sel.inputSimple,i.onInputFocus).on("click",i.sel.layoutToggles,i.onLayoutToggleClick).on("click",i.sel.FPCFColorScheme,i.onFPCFThemeClick).on("blur",i.sel.inputSimple,i.onInputBlur).on("input",i.sel.inputSimple,i.onInput).on("change",i.sel.inputSimple,i.onChange).on("wpformsUndoRedoChange","input, select",i.onTriggeredChange)},onInputFocus(e){var o,e=t(e.target);e.hasClass("wpforms-smart-tags-enabled")||e.prev(i.sel.flatpickrHiddenInput).length||(o=i.UndoRedoHelpers.getElementKey(e),i.UndoRedo.trackedInputs.set(o,i.getInputValue(e)),i.UndoRedoInputProviderConnection?.trackContainer(e))},onLayoutToggleClick(e){var o=t(e.target).attr("for");e.target=t("#"+o)[0],i.onInputFocus(e)},onFPCFThemeClick(e){var o=t(e.target).closest("label, .minicolors"),n=o.attr("for");e.target=o.is(".minicolors-swatch")?o.find("input"):t("#"+n)[0],i.onInputFocus(e)},onInputBlur(e){i.UndoRedo.isSuppressed()||(e=t(e.target)).is("select")||e.is(".wpforms-smart-tags-enabled")||e.closest(".wpforms-calculations-editor-wrap").length||e.prev(i.sel.flatpickrHiddenInput).length||i.recordCommand(e)},onTriggeredChange(e){i.UndoRedo.isSuppressed()||(e=t(e.target),i.recordCommand(e))},onInput(e){i.UndoRedo.isSuppressed()||(e=t(e.target)).is("select:not(.choices__input)")&&i.recordCommand(e)},onChange(e){i.UndoRedo.isSuppressed()||"radio"===(e=t(e.target)).attr("type")&&i.recordCommand(e)},getInputValue(e){var o;return"radio"===e.attr("type")?(o=e.attr("name"),i.el.$builder.find(`input[name="${CSS.escape(o)}"]`).filter(":checked").val()||""):e.val()},recordCommand(e){var o,n,t,r;i.preventRecordingCommand||i.UndoRedo.isRecordPrevented()||i.UndoRedoHelpers.isIgnoredElement(e)||(o=i.UndoRedoHelpers.getElementKey(e),n=i.UndoRedo.trackedInputs.get(o),t=i.getInputValue(e),r=i.UndoRedoInputProviderConnection?.getCommandExtraArgs(e),i.UndoRedoHelpers.areValuesEqual(n,t))||(e=i.UndoRedo.getCommand("InputChangeCommand",e,n,t,r),i.UndoRedo.record(e),i.UndoRedo.trackedInputs.set(o,t))}};return i}