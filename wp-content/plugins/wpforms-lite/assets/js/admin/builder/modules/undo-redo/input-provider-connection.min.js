export default function(e,n,o){let t={el:{},sel:{providerConnection:".wpforms-builder-provider-connection"},init(){t.setup(),t.el.$builder.on("wpformsBuilderReady",t.ready)},setup(){t.el.$builder=o("#wpforms-builder"),t.el.$providers=o("#wpforms-panel-providers")},ready(){try{t.UndoRedo=WPForms.Admin.Builder.UndoRedo,t.UndoRedoHelpers=WPForms.Admin.Builder.UndoRedoHelpers}catch(e){return void wpf.debug("UndoRedoInputProviderConnection: Dependency modules are not available.")}t.events()},events(){t.el.$providers.on("connectionRendered",t.onConnectionRendered),t.el.$builder.on("wpformsUndoRedoRun",t.onUndoRedoRun)},onConnectionRendered(){var e;t.UndoRedo.isRecordPrevented()||(e=t.UndoRedo.getCurrentCommand("undo"))?.args?.new?.$container?.length&&(e.args.new.$container=t.trackContainer(e.$input))},onUndoRedoRun(e,n,o){var r="undo"===n?"old":"new";"InputChangeCommand"===o?.constructor?.id?.toString()&&o?.args?.[r]?.$container?.length&&o?.$input?.length&&(r=t.getContainer(o.$input),"undo"===n?t.UndoRedoHelpers.replaceDOMElementContent(r,o.args.old.$container):o.applyValue(o.newValue))},trackContainer(e){e=t.getContainer(e);return e?.length?(t.$trackContainer=e,t.UndoRedoHelpers.getCurrentContainer(t.$trackContainer)):e},getContainer(e){return t.UndoRedoHelpers.getElement(e).closest(t.sel.providerConnection)},getCommandExtraArgs(){return t.$trackContainer?.length?{old:{$container:t.UndoRedoHelpers.getTrackedContainer(t.$trackContainer)},new:{$container:t.UndoRedoHelpers.getCurrentContainer(t.$trackContainer)}}:null}};return t}